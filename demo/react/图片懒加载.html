<!DOCTYPE html><html>
<head>
    <meta charset="utf-8" />
    <title>react 图片懒加载</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/lazysizes/0.4.0/lazysizes.min.js"  async=""></script>
    <style>
        .content{
            height: 700px;
            border: 2px solid red;
        }
        img{
            margin: 20px;
            max-height: 600px;
            border: 1px solid red;
            padding: 10px;
        }
        li{
            list-style: none;
        }

        .teaser.lazyload {
            opacity: 0;
            transform: scale(0.8);
        }

        .teaser.lazyloaded {
            opacity: 1;
            transform: scale(1);
            transition: all 700ms;
        }
    </style>
</head>
<body>


<div id="app">
</div>


<script type="text/babel">
    class App extends React.Component {
        constructor(props) {
            super(props);
            this.state={
                imgLists:['https://img.zcool.cn/community/01629f5f6744e911013f3110273836.jpg@1280w_1l_2o_100sh.jpg','https://img.zcool.cn/community/01d3815f6744ba11013e45842dbc3a.jpg@1280w_1l_2o_100sh.jpg','https://img.zcool.cn/community/01ce2b5f6744d011013f31106a42ca.jpg@1280w_1l_2o_100sh.jpg'],
                imgBg:'https://huaban.com/img/img_bg_2.png',  //1x1 背景图片
                imgBgBase64:'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==',  //1x1 背景图片
            }
        }
        render() {
            return (
                <div>
                    <div className="content">
                        我是主要内容
                    </div>
                    <ul>
                        {
                            this.state.imgLists.map((item,index)=>{
                                return <li key={index}> <img src={this.state.imgBgBase64} alt="" data-src={item} className="lazyload"/></li>
                            })
                        }
                    </ul>
                </div>
            );
        }
    }
    ReactDOM.render(
        <App />,
        document.getElementById('app')
    );
</script>


</body>
