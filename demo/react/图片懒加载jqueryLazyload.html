<!DOCTYPE html><html>
<head>
    <meta charset="utf-8" />
    <title>react 图片懒加载</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>

    <script type="text/javascript" src="//static.ydlcdn.com/global/js/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="//static.ydlcdn.com/global/js/jquery.lazyload.min.js"></script>
    <style>
        .content{
            height: 700px;
            border: 2px solid red;
        }
        img{
            margin: 120px 20px;
            height: 800px;
            width: 800px;
            border: 1px solid red;
            padding: 10px;
        }
        li{
            list-style: none;
        }

        .teaser.lazyload {
            opacity: 0;
            transform: scale(0.8);
        }

        .teaser.lazyloaded {
            opacity: 1;
            transform: scale(1);
            transition: all 700ms;
        }
    </style>
</head>
<body>


<div id="app">
</div>


<script type="text/babel">
    class App extends React.Component {
        constructor(props) {
            super(props);
            this.state={
                imgLists:['https://img.zcool.cn/community/01629f5f6744e911013f3110273836.jpg@1280w_1l_2o_100sh.jpg','https://img.zcool.cn/community/01d3815f6744ba11013e45842dbc3a.jpg@1280w_1l_2o_100sh.jpg','https://img.zcool.cn/community/01ce2b5f6744d011013f31106a42ca.jpg@1280w_1l_2o_100sh.jpg'],
                imgBg:'https://huaban.com/img/img_bg_2.png',  //1x1 背景图片
                imgBgBase64:'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==',  //1x1 背景图片
                imgLoading:'https://img.lanrentuku.com/img/allimg/1212/5-121204193R0-50.gif'  //图片loading
            }
        }

        componentDidMount() {

            $(()=>{
                // $("img.lazy").lazyload({
                //     placeholder: this.state.imgLoading,//未加载前的占位图片，一般就是一些“载入中……”的gif
                //     // threshold: 200,//提前200px开始加载
                //     event: "scrollstop",//触发加载的方式为滚动条
                //     effect: "fadeIn"//带淡入的动画效果
                // });：

                $('img.lazy').lazyload();
            })

        }

        render() {
            return (
                <div>
                    <div className="content">
                        我是主要内容
                    </div>
                    <ul>
                        {
                            this.state.imgLists.map((item,index)=>{
                                return <li key={index}> <img  alt="" data-original={item} className="lazy" /></li>
                            })
                        }
                    </ul>
                </div>
            );
        }
    }
    ReactDOM.render(
        <App />,
        document.getElementById('app')
    );
</script>


</body>
